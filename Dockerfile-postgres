FROM postgres:9.6

# Configura locale pt_BR (se disponível na imagem base)
RUN set -ex; \
    if ! localedef -i pt_BR -c -f UTF-8 -A /usr/share/locale/locale.alias pt_BR.UTF-8; then \
        echo "Locale pt_BR.UTF-8 não pôde ser criado, continuando com locale padrão"; \
    fi

# Script de inicialização personalizado
COPY init-db.sh /docker-entrypoint-initdb.d/
RUN chmod +x /docker-entrypoint-initdb.d/init-db.sh

ENV LANG=pt_BR.UTF-8 \
    LC_ALL=pt_BR.UTF-8 \
    POSTGRES_PASSWORD=esus